<!doctype html> 
<html lang="en"> 
<head> 
	<meta charset="UTF-8" />
	<title>BROGRAMMER: THE GAME</title>
    <script src="http://cdn.jsdelivr.net/phaser/2.2.2/phaser.min.js"></script>
    <link rel="stylesheet" type="text/css" href="assets/stylesheets/reset.min.css">
</head>
<body>

<script type="text/javascript">
var game = new Phaser.Game(800, 600, Phaser.AUTO, '', { preload: preload, create: create, update: update });

function preload() {
	game.load.image('background', './assets/images/background.png');
	game.load.spritesheet('hands', './assets/sprites/hands.png', 499, 136);
	game.load.spritesheet('text', './assets/sprites/text.png', 330, 166); 
}

function create() {
	game.physics.startSystem(Phaser.Physics.ARCADE);
	game.add.sprite(0, 0, 'background');

	player = game.add.sprite(180, game.world.height - 180, 'hands');
	text = game.add.sprite(250, game.world.height - 389, 'text');
	game.physics.arcade.enable(player);

	cursors = game.input.keyboard.createCursorKeys();
	hits = 0;
	textFrame = 0;
}

var lastFrame = 0;
var level = 1;

function update() {
	// level 1 mechanics
	if (level == 1) {
		if ((cursors.left.isDown && cursors.left.repeats == 0) || (cursors.right.isDown && cursors.right.repeats == 0)) {
			player.frame = cursors.left.isDown ? 0 : 1;
			if (lastFrame != player.frame) {
				text.frame++;

				if (!text.frame) {
					text.frame = 0;
				}

				hits += 1;

				if (hits == 50) {
					alert('SICK BRO');
					level = 2;
				} else {
					lastFrame = player.frame;
				}
			}
		}
	}
}

</script>

</body>
</html>